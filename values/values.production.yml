# ==============================================
# HELM CHART FORMAT 3 - RECOMMENDED
# Gabungan: Simple + Lengkap + Flexible
# ==============================================

# App Info
appName: portofolio-event-music-fe
namespace: portofolio

# Replicas
replicaCount: 1

# Image Configuration
image:
    repository: 192.168.20.21/other/portofolio-event-music-fe # Registry Anda 192.168.20.21, bukan 192.168.20.11
    tag: "latest"
    pullPolicy: Always

# Image Pull Secrets (untuk private registry)
imagePullSecrets:
    - name: harbor-creds

# Name Override
nameOverride: ""
fullnameOverride: ""

# Container Configuration
containerPort: 3000

# Service Configuration
service:
    type: NodePort # Ganti ke ClusterIP karena pakai Ingress
    port: 3000
    targetPort: 3000
    nodePort: 30802 # hanya untuk NodePort (range: 30000-32767)

ingress:
    enabled: true
    className: ingress-endlessapp
    annotations:
        nginx.ingress.kubernetes.io/use-regex: "true"
        kubernetes.io/ingress.allow-http: "true"
    hosts:
        - host: ""
          paths:
              - path: /
                pathType: Prefix

# Health Check / Probes
probe:
    enabled: false
    liveness:
        path: /health # pastikan endpoint ini ada di app
        port: 3000
    readiness:
        path: /health
        port: 3000

# Resources
resources:
    requests:
        cpu: 100m
        memory: 128Mi
    limits:
        cpu: 200m
        memory: 256Mi

# Autoscaling (HPA)
autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 1
    targetCPUUtilizationPercentage: 80
    targetMemoryUtilizationPercentage: 80

# Environment Variables
env: []

# Environment from ConfigMap/Secret
envFrom: []
# - configMapRef:
#     name: app-config
# - secretRef:
#     name: app-secret

# Volume Mounts
volumeMounts: []
# - name: config-volume
#   mountPath: /app/config

# Volumes
volumes: []
# - name: config-volume
#   configMap:
#     name: app-config

# Host Aliases
hostAliases: []
# - ip: "192.168.20.8"
#   hostnames:
#     - "kafka.local"

# Node Selector
nodeSelector: {}
# disktype: ssd

# Tolerations
tolerations: []
# - key: "dedicated"
#   operator: "Equal"
#   value: "app"
#   effect: "NoSchedule"

# Affinity
affinity: {}
# podAntiAffinity:
#   requiredDuringSchedulingIgnoredDuringExecution:
#   - labelSelector:
#       matchLabels:
#         app: portofolio-event-music-fe
#     topologyKey: kubernetes.io/hostname

# Pod Security Context
podSecurityContext: {}
# fsGroup: 1000

# Container Security Context
securityContext: {}
# runAsNonRoot: true
# runAsUser: 1000

# Service Account
serviceAccount:
    create: false
    name: ""
    annotations: {}
